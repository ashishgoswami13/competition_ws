â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                               â•‘
â•‘              âœ“ AINEX LINE FOLLOWER PACKAGE - BUILD SUCCESSFUL âœ“               â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ PACKAGE INFORMATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Package Name:    ainex_line_follower
Version:         1.0.0
Location:        /home/ubuntu/competition_ws/src/ainex_line_follower
Build Status:    âœ“ SUCCESS (All 5 packages built)
Build Time:      22.7 seconds


ğŸ“ PACKAGE STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ainex_line_follower/
â”‚
â”œâ”€â”€ ğŸ“„ Core Files
â”‚   â”œâ”€â”€ CMakeLists.txt                   âœ“ Build configuration
â”‚   â”œâ”€â”€ package.xml                      âœ“ Package manifest
â”‚   â”œâ”€â”€ setup.py                         âœ“ Python setup
â”‚   â”œâ”€â”€ README.md                        âœ“ Complete documentation
â”‚   â”œâ”€â”€ USAGE.md                         âœ“ Quick start guide
â”‚   â”œâ”€â”€ SUMMARY.md                       âœ“ Package overview
â”‚   â”œâ”€â”€ setup.sh                         âœ“ Auto build script
â”‚   â””â”€â”€ build_and_test.sh                âœ“ Build & test script
â”‚
â”œâ”€â”€ ğŸš€ Launch Files (launch/)
â”‚   â”œâ”€â”€ line_follower_simulation.launch  âœ“ Full simulation
â”‚   â”œâ”€â”€ line_follower_only.launch        âœ“ Node only
â”‚   â””â”€â”€ test_line_follower.launch        âœ“ Test mode
â”‚
â”œâ”€â”€ ğŸ Python Scripts (scripts/)
â”‚   â”œâ”€â”€ line_follower_node.py            âœ“ Main controller (346 lines)
â”‚   â””â”€â”€ simple_camera_publisher.py       âœ“ Test camera (102 lines)
â”‚
â”œâ”€â”€ âš™ï¸  Configuration (config/)
â”‚   â””â”€â”€ line_follower_params.yaml        âœ“ All parameters
â”‚
â””â”€â”€ ğŸ“š Python Package (src/ainex_line_follower/)
    â””â”€â”€ __init__.py                      âœ“ Package init


ğŸ¯ KEY FEATURES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Vision-based line detection using OpenCV
âœ“ HSV color space filtering for black lines
âœ“ Three-region ROI system for robust detection
âœ“ Real-time control based on line position
âœ“ Integration with Gazebo simulation
âœ“ Debug visualization with processed images
âœ“ Configurable parameters via YAML
âœ“ Test mode with simulated camera
âœ“ No hardware dependencies (simulation only)


ğŸ”§ TECHNICAL DETAILS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Algorithm:        Based on Reference/ainex_example/visual_patrol
Image Processing: OpenCV (cv2)
Control Rate:     10 Hz
Detection Method: HSV thresholding + contour detection
ROI Regions:      3 (upper, center, lower)
Image Size:       160x120 (processing), 640x480 (input)
Line Color:       Black (configurable HSV range)
Control Range:    Yaw: Â±8Â°, Forward: 0-0.010m


ğŸ“‹ DEPENDENCIES (ALL SATISFIED)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ rospy                    (ROS Python library)
âœ“ std_msgs                 (Standard ROS messages)
âœ“ sensor_msgs              (Sensor messages)
âœ“ geometry_msgs            (Geometry messages)
âœ“ cv_bridge                (OpenCV-ROS bridge)
âœ“ image_transport          (Image transport)
âœ“ ainex_description        (Robot URDF)
âœ“ ainex_gazebo             (Gazebo controllers)
âœ“ gazebo_world             (World files)
âœ“ gazebo_ros               (Gazebo ROS interface)


ğŸš€ QUICK START
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Step 1: Source the workspace
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  source /home/ubuntu/competition_ws/devel/setup.bash


Step 2: Launch full simulation (RECOMMENDED)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  roslaunch ainex_line_follower line_follower_simulation.launch

  This will:
  â€¢ Start Gazebo with line follower world
  â€¢ Spawn the Ainex robot
  â€¢ Load all joint controllers
  â€¢ Start the line following node


Step 3: View debug output (OPTIONAL)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # In a new terminal (after sourcing workspace)
  rosrun image_view image_view image:=/line_follower/debug_image


ğŸ“Š ROS TOPICS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SUBSCRIBED:
  /camera/rgb/image_raw              [sensor_msgs/Image]
    â””â”€ Camera input from Gazebo

PUBLISHED:
  /line_follower/debug_image         [sensor_msgs/Image]
    â””â”€ Processed image with detection visualization
  
  /line_follower/line_detected       [std_msgs/Bool]
    â””â”€ Line detection status
  
  /l_hip_yaw_controller/command      [std_msgs/Float64]
  /r_hip_yaw_controller/command      [std_msgs/Float64]
  (+ other joint controllers)
    â””â”€ Joint position commands


âš™ï¸  CONFIGURATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Edit: ~/competition_ws/src/ainex_line_follower/config/line_follower_params.yaml

Key Parameters:
  â€¢ image_process_size: [160, 120]       Processing resolution
  â€¢ lower_black: [0, 0, 0]               HSV lower bound
  â€¢ upper_black: [180, 255, 50]          HSV upper bound
  â€¢ yaw_range: [-8, 8]                   Turning angle (degrees)
  â€¢ x_max: 0.010                         Forward step (meters)
  â€¢ control_rate: 10                     Control loop (Hz)


ğŸ§ª TESTING OPTIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. FULL SIMULATION TEST (with Gazebo and robot)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   roslaunch ainex_line_follower line_follower_simulation.launch


2. ALGORITHM TEST (without Gazebo, using synthetic images)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   roslaunch ainex_line_follower test_line_follower.launch


3. MANUAL COMPONENT TEST (separate components)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Terminal 1: roslaunch gazebo_world spawn_robot_line_follower.launch
   Terminal 2: roslaunch ainex_line_follower line_follower_only.launch
   Terminal 3: rosrun image_view image_view image:=/line_follower/debug_image


ğŸ“– DOCUMENTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  README.md           Complete package documentation with all features
  USAGE.md            Quick start guide and troubleshooting
  SUMMARY.md          Package overview and architecture
  THIS_FILE           Build success confirmation


ğŸ” USEFUL ROS COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # List all topics
  rostopic list

  # Monitor line detection
  rostopic echo /line_follower/line_detected

  # Check camera feed
  rostopic hz /camera/rgb/image_raw

  # View computation graph
  rqt_graph

  # Monitor node resources
  rqt_top

  # List running nodes
  rosnode list


ğŸ› TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Problem: "Package not found"
Solution: source /home/ubuntu/competition_ws/devel/setup.bash

Problem: "No camera images"
Solution: Check robot URDF has camera sensor in Gazebo

Problem: "Line not detected"
Solution: View debug image and tune HSV thresholds in config file

Problem: "Robot not moving"
Solution: Check controllers: rosservice call /controller_manager/list_controllers

Problem: Build errors
Solution: catkin clean -y && catkin build


ğŸ“ BASED ON REFERENCE PACKAGES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Reference/ainex_example/visual_patrol/          Line following logic
Reference/ainex_driver/ainex_kinematics/        Walking control (adapted)
Reference/ainex_sdk/                             Robot utilities (removed)

Adapted for Gazebo simulation by removing hardware dependencies and
simplifying for simulation use.


âœ¨ NEXT STEPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. âœ“ Package created and built successfully
2. â†’ Source workspace and launch simulation
3. â†’ Test line following in Gazebo
4. â†’ Tune parameters for optimal performance
5. â†’ (Optional) Add camera to robot URDF if needed
6. â†’ (Optional) Integrate full walking module from ainex_kinematics


ğŸ“ BUILD LOG
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Date:            October 16, 2025
Build System:    catkin build
Packages Built:  5/5
  âœ“ catkin_tools_prebuild       4.4s
  âœ“ ainex_description          10.8s
  âœ“ ainex_gazebo               10.5s
  âœ“ gazebo_world               10.8s
  âœ“ ainex_line_follower         7.1s
Total Time:      22.7s
Status:          SUCCESS âœ“


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                    ğŸ‰ PACKAGE READY FOR USE! ğŸ‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
